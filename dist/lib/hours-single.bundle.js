!function(e){function t(t){for(var n,i,o=t[0],l=t[1],p=t[2],u=0,d=[];u<o.length;u++)i=o[u],r[i]&&d.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(h&&h(t);d.length;)d.shift()();return a.push.apply(a,p||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],n=!0,o=1;o<s.length;o++){var l=s[o];0!==r[l]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=s[0]))}return e}var n={},r={1:0},a=[];function i(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=n,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var p=0;p<o.length;p++)t(o[p]);var h=l;a.push([45,0]),s()}({45:function(e,t,s){"use strict";s.r(t);var n=s(1);s(25),s(31);let r=document.createElement("div");r.style.display="none",r.innerHTML="\n<style>\nlibrary-hours-single .keep-together{\n    white-space: nowrap;\n}\nlibrary-hours-single .open-status{\n    display: flex;\n    align-items:center;\n}\nlibrary-hours-single .status-icon{\n    margin-right: 8px;\n    margin-left: 8px;\n    margin-bottom: inherit !important;\n    width: 25px;\n    height: 25px;\n    min-width: 25px;\n    min-height: 25px;\n}\nlibrary-hours-single .open-hours{\n    padding-left: 41px;\n}\n\n</style>",document.head.appendChild(r);var a=e=>(class extends e{_attachDom(e){if(window.ShadyDOM&&window.ShadyDOM.inUse)return super._attachDom(e);let t=e.querySelectorAll("style");for(var s=0;s<t.length;s++)t[s].parentNode.removeChild(t[s]),this._stylesInserted||(t[s].setAttribute("id",this.nodeName.toLowerCase()+"-styles"),document.head.appendChild(t[s]));return this.appendChild(e),e}querySelector(e){return this.shadowRoot?this.shadowRoot.querySelector(e):super.querySelector(e)}querySelectorAll(e){return this.shadowRoot?this.shadowRoot.querySelectorAll(e):super.querySelectorAll(e)}});class i extends(Mixin(n.a).with(a)){static get template(){return n["b"]`
    <iron-ajax
        id$="[[search_term]]"
        url$="[[endpoint]]"
        params$="[[api_params]]"
        handle-as="json"
        on-response="handle_response"
        debounce-duration="300">
    </iron-ajax>
    <span class="open-status">
        <img  class="status-icon" src$=[[status_icon]] alt$=[[status]]>
        <strong>[[status_str]]</strong>
    </span>
    <div class="open-hours">
        <span class="keep-together">[[todays_hours.open]]</span>
        <span class="keep-together">[[todays_hours.close]]</span>
    </div>

        `}static get is(){return"library-hours-single"}static get properties(){return{verbose:{type:Boolean},today:{type:Date},endpoint:{type:String},key:{type:String},search_term:{type:String},api_params:{type:Object},status:{type:String},status_str:{type:String},status_icon:{type:String},todays_hours:{type:Object}}}constructor(){super()}ready(){super.ready();try{var e=(new Date).toLocaleString("en-US",{timeZone:"America/Los_Angeles"});e=new Date(e.split(",")[0]),this.today=e}catch(t){e=this._ie_today(),this.today=e}this.verbose&&console.log("today",this.today),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)});var t={key:this.key,q:this.search_term,singleEvents:!0},s=this.today.toJSON().split("T")[0]+"T22:00:00-07:00";t.timeMax=s;var n=this.today.toJSON().split("T")[0]+"T02:00:00-07:00";t.timeMin=n,this.api_params=t,this.verbose&&console.log("api_params",t),this.querySelector("#"+this.search_term).generateRequest()}handle_response(e){var t=e.detail.response;if(this.verbose&&console.log("raw response",t),t.items.length<1)this.set("status","lib-closed"),this.set("status_icon","https://drive.google.com/uc?id=1i3Fq2Zu_4AbbtU6s26CgBhCBFCMJCTe9");else{t.items.length>1&&console.log(`More than one event retrieved for ${this.search_term}. Displaying first item.`);var s=t.items[0],n={};if("dateTime"in s.start){var r=this._split_datetime(s.start.dateTime);n.start_date=r.date,n.start_time=r.time,n.end_time=this._split_datetime(s.end.dateTime).time}else n.start_date=new Date(this.today),n.start_time="00:00",n.end_time="00:00";this._open_now(n)?(this.set("status","lib-open"),this.set("status_icon","https://drive.google.com/uc?id=1oef1f3noVDdo0AE6Q5wlaj-qlSFmGC5T")):(this.set("status","lib-closed"),this.set("status_icon","https://drive.google.com/uc?id=1i3Fq2Zu_4AbbtU6s26CgBhCBFCMJCTe9"))}if("lib-closed"==this.status)this.set("status_str","Currently CLOSED"),this.set("todays_hours",{open:"",close:""});else{this.set("status_str","Currently OPEN");var a=this._hours_string(n);this.set("todays_hours",a)}}_ie_today(){for(var e=new Date,t=e.getTime()+6e4*e.getTimezoneOffset(),s=new Date(t+-252e5),n=new Date(t+-288e5),r=[new Date(2015,2,8),new Date(2015,10,2),new Date(2016,2,13),new Date(2016,10,7),new Date(2017,2,12),new Date(2017,10,6),new Date(2018,2,11),new Date(2018,10,5),new Date(2019,2,10),new Date(2019,10,4),new Date(2020,2,8),new Date(2020,10,2),new Date(2021,2,14),new Date(2021,10,8),new Date(2022,2,13),new Date(2022,10,7),new Date(2023,2,12),new Date(2023,10,6),new Date(2024,2,10),new Date(2024,10,4)],a=0;a<r.length;a++)if(n<r[a])return s;return console.log("Unable to determine daylight savings time. See _ie_today function"),e}_split_datetime(e){var t={},s=e.split("T");s[0].split("-");return t.date=new Date(s[0]),t.time=s[1].substr(0,5),t}_hours_string(e){for(var t={},s=[e.start_time,e.end_time],n=0;n<2;n++){var r="",a=s[n].split(":"),i=parseInt(a[0]);if(i>12){i-=12;var o="pm"}else if(0==i){i=12;o="am"}else if(12==i){i=12;o="pm"}else o="am";r+=i.toString()+":"+a[1],r+=" "+o,0==n?t.open="Today: "+r+" -":t.close=r}return t}_open_now(e){try{var t=(s=(new Date).toLocaleString("en-GB",{timeZone:"America/Los_Angeles"})).split(",")[1].split(":");t=parseInt(t[0]+t[1])}catch(e){var s=this._ie_today(),n=String(s.getHours());1==n.length&&(n="0"+n);var r=String(s.getMinutes());1==r.length&&(r="0"+r);t=parseInt(n+r)}var a=e.start_time.split(":");a=parseInt(a[0]+a[1]);var i=e.end_time.split(":");return i=parseInt(i[0]+i[1]),t>=a&&t<i||t>=a&&a>=i}}customElements.define(i.is,i)}});