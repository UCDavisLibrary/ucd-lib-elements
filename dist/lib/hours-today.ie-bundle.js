!function(e){function t(t){for(var r,o,s=t[0],l=t[1],p=t[2],d=0,c=[];d<s.length;d++)o=s[d],a[o]&&c.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);c.length;)c.shift()();return i.push.apply(i,p||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={2:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var p=0;p<s.length;p++)t(s[p]);var u=l;i.push([47,0]),n()}({44:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(r):void 0};t.default=function(e){return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),r(n,[{key:"_attachDom",value:function(e){if(window.ShadyDOM&&window.ShadyDOM.inUse)return a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_attachDom",this).call(this,e);for(var t=e.querySelectorAll("style"),r=0;r<t.length;r++)t[r].parentNode.removeChild(t[r]),this._stylesInserted||(t[r].setAttribute("id",this.nodeName.toLowerCase()+"-styles"),document.head.appendChild(t[r]));return this.appendChild(e),e}},{key:"querySelector",value:function(e){return this.shadowRoot?this.shadowRoot.querySelector(e):a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"querySelector",this).call(this,e)}},{key:"querySelectorAll",value:function(e){return this.shadowRoot?this.shadowRoot.querySelectorAll(e):a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"querySelectorAll",this).call(this,e)}}]),n}()}},45:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="\n<style>\nlibrary-hours {\n  display: block;\n  background-color: transparent;\n  padding: 0px;\n}\n\nlibrary-hours .hours-table{\n    border-bottom: none;\n    border-collapse: collapse;\n    margin-bottom: 0px;\n    width: 100%;\n    display: table;\n    table-layout: fixed;\n}\n\nlibrary-hours .hours-tr {\n    background-color: transparent;\n    border: none;\n    display:table-row;\n}\n\nlibrary-hours .hours-td {\n    border-bottom: none;\n    border-top: 1px solid #d8d8d8;\n    padding-left: 0px;\n    padding-right: 0px;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    word-wrap: normal;\n    display: table-cell;\n    vertical-align: middle;\n}\n\n\nlibrary-hours a {\n    color: #002655;\n}\n\nlibrary-hours .closed {\n    color:#ba0c2f;\n    text-align: center;\n    font-weight: 600;\n    width: 11%;\n}\nlibrary-hours .open {\n    text-align: center;\n    width: 11%;\n}\n\nlibrary-hours th.is-today{\n    border-top: 3px solid #DAAA00;\n}\n\nlibrary-hours .keep-together{\n    white-space: nowrap;\n}\nlibrary-hours .status-icon{\n    margin-right: 4px;\n    margin-left: 8px;\n    margin-bottom: inherit !important;\n    width: 25px;\n    height: 25px;\n    min-width: 25px;\n    min-height: 25px;\n}\n  library-hours .lib-titles{\n      display:flex;\n      align-items:center;\n      font-weight: 600;\n      text-decoration: none;\n\n  }\n  library-hours .dept-titles{\n      display:flex;\n      align-items:center;\n  }\n</style>"},46:function(e,t,n){"use strict";var r,a=n(45),i=(r=a)&&r.__esModule?r:{default:r};var o=document.createElement("div");o.style.display="none",o.innerHTML=i.default,document.head.appendChild(o)},47:function(e,t,n){"use strict";var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(r=['\n        <iron-ajax\n            id="init_ajax"\n            url$="[[json_path]]"\n            handle-as="json"\n            on-response="_make_iron_ajax"\n            debounce-duration="300"></iron-ajax>\n\n\n    <template id="ajax_repeater" is="dom-repeat" items={{_api_parameters}} as="api">\n    <iron-ajax\n        id="[[api.id]]"\n        url="[[api.url]]"\n        params="[[api.params]]"\n        handle-as="json"\n        on-response="handle_response"\n        debounce-duration="300"></iron-ajax>\n    </template>\n\n        <div>\n            <div class="link-see-all-top clearfix">\n                <div class="float-xs-left">\n                    <h2 style="padding-right:5px;">Library Hours Today</h2>\n                </div>\n                <div class="float-xs-right" style="margin-top:8px;">\n                    <a href$="[[see_all]]" class="bold-link">See All\n                        <i class="cork-chevron right small gold" style="vertical-align: text-bottom;"></i>\n                    </a>\n                </div>\n            </div>\n            <div class="spacer"></div>\n        </div>\n\n        <div class="hours-table">\n            <template is="dom-repeat" items="{{hours_today}}" sort=sort_hours>\n                <div class="hours-tr">\n                    <div class="hours-td" style="width:59%;">\n                        <a class$="[[item.type]]" href$=[[item.url]]>\n                        <img  class="status-icon" src$=[[item.icon_url]] alt$=[[item.status]]>\n                        [[item.title]]\n                        </a>\n                    </div>\n                    <div class$="[[item.status]] hours-td" style="width:41%;">\n                        <span class="keep-together">[[item.display_string.open]]</span>\n                        <span class="keep-together">[[item.display_string.close]]</span>\n                    </div>\n                </div>\n            </template>\n        </div>\n\n        '],a=['\n        <iron-ajax\n            id="init_ajax"\n            url$="[[json_path]]"\n            handle-as="json"\n            on-response="_make_iron_ajax"\n            debounce-duration="300"></iron-ajax>\n\n\n    <template id="ajax_repeater" is="dom-repeat" items={{_api_parameters}} as="api">\n    <iron-ajax\n        id="[[api.id]]"\n        url="[[api.url]]"\n        params="[[api.params]]"\n        handle-as="json"\n        on-response="handle_response"\n        debounce-duration="300"></iron-ajax>\n    </template>\n\n        <div>\n            <div class="link-see-all-top clearfix">\n                <div class="float-xs-left">\n                    <h2 style="padding-right:5px;">Library Hours Today</h2>\n                </div>\n                <div class="float-xs-right" style="margin-top:8px;">\n                    <a href$="[[see_all]]" class="bold-link">See All\n                        <i class="cork-chevron right small gold" style="vertical-align: text-bottom;"></i>\n                    </a>\n                </div>\n            </div>\n            <div class="spacer"></div>\n        </div>\n\n        <div class="hours-table">\n            <template is="dom-repeat" items="{{hours_today}}" sort=sort_hours>\n                <div class="hours-tr">\n                    <div class="hours-td" style="width:59%;">\n                        <a class$="[[item.type]]" href$=[[item.url]]>\n                        <img  class="status-icon" src$=[[item.icon_url]] alt$=[[item.status]]>\n                        [[item.title]]\n                        </a>\n                    </div>\n                    <div class$="[[item.status]] hours-td" style="width:41%;">\n                        <span class="keep-together">[[item.display_string.open]]</span>\n                        <span class="keep-together">[[item.display_string.close]]</span>\n                    </div>\n                </div>\n            </template>\n        </div>\n\n        '],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),s=n(1);n(11),n(16),n(14),n(46);var l,p=n(44),u=(l=p)&&l.__esModule?l:{default:l};var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Mixin(s.PolymerElement).with(u.default)),i(t,null,[{key:"template",get:function(){return(0,s.html)(o)}},{key:"is",get:function(){return"library-hours"}},{key:"properties",get:function(){return{_calendars:{type:Object,value:{}},_api_parameters:{type:Array,value:[]},json_path:{type:String},see_all:{type:String,value:""},verbose:{type:Boolean},hours_today:{type:Array,value:[]},today:{type:Date},ajax_ids:{type:Array,value:[]},event_ids:{type:Array,value:[]},_lib_event_crosswalk:{type:Object,value:{}}}}}]),i(t,[{key:"ready",value:function(){(function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(r):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this);try{var e=(new Date).toLocaleString("en-US",{timeZone:"America/Los_Angeles"});e=new Date(e.split(",")[0]),this.today=e}catch(t){e=this._ie_today(),this.today=e}String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),this.$.init_ajax.generateRequest()}},{key:"_make_iron_ajax",value:function(e){for(var t=e.detail.response,n=0;n<t.length;n++){var r={};this.push("ajax_ids",t[n].ajax_id),r.url=t[n].url,r.params=t[n].params,r.params.singleEvents=!0;var a=this.today.toJSON().split("T")[0]+"T22:00:00-07:00";r.params.timeMax=a;var i=this.today.toJSON().split("T")[0]+"T02:00:00-07:00";r.params.timeMin=i,r.id=t[n].ajax_id,this._lib_event_crosswalk[t[n].ajax_id]=t[n].event_series;for(var o=0;o<t[n].event_series.length;o++)this.push("event_ids",t[n].event_series[o].search_term);this.push("_api_parameters",r)}this.verbose&&console.log("api parameters",this._api_parameters),this.$.ajax_repeater.render();for(n=0;n<this.ajax_ids.length;n++)this.querySelector("#"+this.ajax_ids[n]).generateRequest()}},{key:"handle_response",value:function(e){var t=e.detail.response;this.verbose&&console.log("raw response",t);for(var n=e.target.getAttribute("id"),r=this._lib_event_crosswalk[n],a=0;a<r.length;a++){var i=r[a].search_term,o=r[a].title,s=r[a].type,l=r[a].url,p=this._parse_calendar(t,i),u={title:o,id:i,data:p,ajax_id:n,type:s,url:l};this._calendars[i]=u,this.verbose&&console.log(i," parsed",u);var d=p;if(d.display_string=this._hours_string(d),d.title=o,d.id=i,d.url=l,"library"==u.type.toLowerCase()){var c=!0;d.type="lib-titles"}else{c=!1;d.type="dept-titles"}c?this._open_now(d)?d.icon_url="https://drive.google.com/uc?id=1oef1f3noVDdo0AE6Q5wlaj-qlSFmGC5T":d.icon_url="https://drive.google.com/uc?id=1i3Fq2Zu_4AbbtU6s26CgBhCBFCMJCTe9":this._open_now(d)?d.icon_url="https://drive.google.com/uc?id=1n0fB8usubCNXZus_fy3sTTfaiawmMc36":d.icon_url="https://drive.google.com/uc?id=1zRzqS2sXCCXCu6WkNkz70hrY5sBMT07v";var h=this.event_ids.indexOf(i);-1!=h&&(d.display_order=h,this.push("hours_today",d),this.verbose&&console.log(i," todays hours",d))}}},{key:"_concat_id",value:function(e,t){return e+"__"+t}},{key:"_open_now",value:function(e){if("closed"==e.status)return!1;try{var t=(n=(new Date).toLocaleString("en-GB",{timeZone:"America/Los_Angeles"})).split(",")[1].split(":");t=parseInt(t[0]+t[1])}catch(e){var n=this._ie_today(),r=String(n.getHours());1==r.length&&(r="0"+r);var a=String(n.getMinutes());1==a.length&&(a="0"+a);t=parseInt(r+a)}var i=e.start_time.split(":");i=parseInt(i[0]+i[1]);var o=e.end_time.split(":");return o=parseInt(o[0]+o[1]),t>=i&&t<o||t>=i&&i>=o}},{key:"_format_header",value:function(e){var t="";return 7==e.length&&(t+=e[0].month_str.toUpperCase()+" "+e[0].day,t+=" - "+e[6].month_str.toUpperCase()+" "+e[6].day+" "+e[6].year),t}},{key:"sort_hours",value:function(e,t){return e.display_order-t.display_order}},{key:"_hours_string",value:function(e){if("closed"==e.status)return{open:"CLOSED",close:""};for(var t={},n=[e.start_time,e.end_time],r=0;r<2;r++){var a="",i=n[r].split(":"),o=parseInt(i[0]);if(o>12){o-=12;var s="pm"}else if(0==o){o=12;s="am"}else if(12==o){o=12;s="pm"}else s="am";a+=o.toString()+":"+i[1],a+=" "+s,0==r?t.open=a+" -":t.close=a}return t}},{key:"split_datetime",value:function(e){var t={},n=e.split("T");n[0].split("-");return t.date=new Date(n[0]),t.time=n[1].substr(0,5),t}},{key:"_ie_today",value:function(){for(var e=new Date,t=e.getTime()+6e4*e.getTimezoneOffset(),n=new Date(t+-252e5),r=new Date(t+-288e5),a=[new Date(2015,2,8),new Date(2015,10,2),new Date(2016,2,13),new Date(2016,10,7),new Date(2017,2,12),new Date(2017,10,6),new Date(2018,2,11),new Date(2018,10,5),new Date(2019,2,10),new Date(2019,10,4),new Date(2020,2,8),new Date(2020,10,2),new Date(2021,2,14),new Date(2021,10,8),new Date(2022,2,13),new Date(2022,10,7),new Date(2023,2,12),new Date(2023,10,6),new Date(2024,2,10),new Date(2024,10,4)],i=0;i<a.length;i++)if(r<a[i])return n;return console.log("Unable to determine daylight savings time. See _ie_today function"),e}},{key:"_parse_calendar",value:function(e,t){for(var n=e.items,r={id:t,status:"closed"},a=0;a<n.length;a++){if("description"in n[a])var i=n[a].description.toLowerCase();else i="";if(i.includes(t.toLowerCase())){if(!0,"dateTime"in n[a].start){var o=this.split_datetime(n[a].start.dateTime);r.start_date=o.date,r.start_time=o.time,r.end_time=this.split_datetime(n[a].end.dateTime).time}else r.start_date=new Date(this.today),r.start_time="00:00",r.end_time="00:00";r.status="open";break}}return r}}]),t}();customElements.define(d.is,d)}});