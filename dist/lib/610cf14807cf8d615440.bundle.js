(window.webpackJsonp=window.webpackJsonp||[]).push([[3],[,function(e,n,t){"use strict";t.r(n);var r=t(9),a=(t(18),t(19),t(13),t(17),t(44),t(43),t(46),t(45),'\n  <iron-ajax\n      id="ajax_materials"\n      handle-as="json"\n      rejectWithRequest\n      debounce-duration="300">\n  </iron-ajax>\n  <iron-ajax\n      id="ajax_subjects"\n      handle-as="json"\n      rejectWithRequest\n      debounce-duration="300">\n  </iron-ajax>\n  <h1 class="title">Database Search</h1>\n  <div class="help">Find databases for scholarly articles, newspapers, popular literature, properties, statistics, images, dissertations and more.</div>\n  <div class="dbsearch_row">\n      <iron-label for="availability_cont">Available to:</iron-label>\n      <div id="availability_cont">\n        <label class="check_cont">Everyone\n          <input type="checkbox" id="check_everyone" on-click="_toggle_checkbox" checked$={{query.everyone}}>\n          <span class="checkmark_styled"></span>\n        </label>\n        <label class="check_cont">UC Davis Campus (or <a href$="[[vpn_url]]">VPN</a>)\n          <input type="checkbox" id="check_vpn" on-click="_toggle_checkbox" checked$={{query.vpn}}>\n          <span class="checkmark_styled"></span>\n        </label>\n      </div>\n  </div>\n  <div class="dbsearch_row">\n      <div class="dbsearch-drop">\n        <iron-label for="subjects_button" class="ontop">Subjects</iron-label>\n        <div class="dbsearch_button"\n             id="subjects_button"\n             on-click="_open_dropdown"\n             drop_type="subjects"\n             role="button">Any Subject\n        </div>\n        <div class="arrowdown"></div>\n        <iron-dropdown id="drop_subjects" horizontal-align="left" vertical-align="top">\n          <ul slot="dropdown-content" tabindex="0">\n            <template is="dom-repeat" items = "[[subjects]]" as="subject">\n              <li on-click="_select_dropdown" drop_type="subjects" slug$=[[subject.slug]]>[[subject.name]]</li>\n            </template>\n          </ul>\n        </iron-dropdown>\n      </div>\n      <div class="dbsearch-drop">\n        <iron-label for="materials_button" class="ontop">Materials</iron-label>\n        <div class="dbsearch_button"\n             id="materials_button"\n             on-click="_open_dropdown"\n             drop_type="materials"\n             role="button">Any Material\n        </div>\n        <div class="arrowdown"></div>\n        <iron-dropdown id="drop_materials" horizontal-align="left" vertical-align="top">\n          <ul slot="dropdown-content" tabindex="0">\n            <template is="dom-repeat" items = "[[materials]]" as="material">\n              <li on-click="_select_dropdown" drop_type="materials" slug$=[[material.slug]]>[[material.name]]</li>\n            </template>\n          </ul>\n        </iron-dropdown>\n      </div>\n      <div id="db_search_cont">\n        <iron-a11y-keys id="db_a11y"\n                        target="[[a11y_target]]"\n                        keys="enter"\n                        on-keys-pressed="submit_query">\n        </iron-a11y-keys>\n        <iron-label for="db_search_input" class="ontop">Database Title or Keyword</iron-label>\n        <div id="input_and_button">\n            <iron-input id="db_search_input"\n                        bind-value={{BindValue}}\n                        auto-validate>\n              <input value="{{BindValue::input}}"\n                     placeholder="Search for Databases">\n            </iron-input>\n            <button id="db_search_submit" class="search-btn" on-click="submit_query">Search</button>\n        </div>\n      </div>\n  </div>\n'),s='\n<style>\n    :host {\n        width: 100%;\n        min-width: 450px;\n    }\n    library-search-db .help {\n        padding-bottom: 20px;\n    }\n    library-search-db iron-label {\n        font-weight: 600;\n        display: block;\n        margin-bottom: 6px;\n    }\n    library-search-db iron-label.ontop {\n        width:100%;\n    }\n    library-search-db .dbsearch_row {\n        display: flex;\n        flex-flow: row wrap;\n    }\n    library-search-db iron-dropdown {\n        width: 250px;\n    }\n    library-search-db .search-btn {\n        text-align: center;\n        display: inline-block;\n        background: #002655;\n        color: #fff;\n        text-decoration: none;\n        padding: 15px;\n        font-weight: 600;\n        font-size: 1rem;\n        line-height: 1.25;\n        border: 1px solid transparent;\n        cursor: pointer;\n        border-radius: 0;\n    }\n    library-search-db #db_search_input {\n        flex: 1;\n    }\n    library-search-db #db_search_input input {\n        box-sizing: border-box;\n        display: block;\n        background-color: #e5e9ef;\n        padding: 15px;\n        color: #002655;\n        border: 1px solid #ccd4e0;\n        border-radius: 0;\n        font-weight: 600;\n        font-size: 1rem;\n        line-height: 1.25;\n        width: 100%;\n        min-width: 350px;\n    }\n    library-search-db #db_search_cont {\n        flex: 1;\n        margin-top: 15px;\n    }\n    library-search-db #db_search_cont #input_and_button {\n        display: flex;\n    }\n    library-search-db .dbsearch-drop {\n        margin-right: 15px;\n        margin-top: 15px;\n        width: 250px;\n        position: relative;\n    }\n    library-search-db .dbsearch_button {\n        background: #DAAA00;\n        color: #002655;\n        min-width: 250px;\n        padding: 5px;\n        padding-left: 15px;\n        padding-right: 25px;\n        font-size: 1rem;\n        border: 1px solid transparent;\n        cursor: pointer;\n        border-radius: 0;\n        text-align: left;\n        font-weight: 400;\n        height: 53px;\n        width: 100%;\n        line-height: 40px;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n    library-search-db .dbsearch-drop button:hover {\n        background: #E9CC66;\n    }\n    [slot="dropdown-content"] {\n        background-color: #DAAA00;\n        color: #002655;\n        line-height: 20px;\n        border-radius: 3px;\n        box-shadow: 0px 2px 6px #ccc;\n    }\n    library-search-db .dbsearch-drop li {\n        padding: 5px;\n        padding-left: 15px;\n        font-size: 1rem;\n        border: 1px solid transparent;\n        cursor: pointer;\n        border-radius: 0;\n        text-align: left;\n        font-weight: 400;\n        text-decoration: none;\n    }\n    library-search-db .dbsearch-drop ul {\n        list-style-type: none;\n        padding: 0;\n    }\n    library-search-db .dbsearch-drop li:hover {\n        background-color: #E9CC66;\n    }\n    library-search-db .check_cont {\n        display: inline-block;\n        position: relative;\n        padding-left: 30px;\n        margin-bottom: 0px;\n        cursor: pointer;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        margin-top: 0px;\n        margin-left: 15px;\n    }\n    library-search-db .check_cont input {\n        position: absolute;\n        opacity: 0;\n        cursor: pointer;\n        height: 0;\n        width: 0;\n    }\n    library-search-db .checkmark_styled {\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 20px;\n        width: 20px;\n        background-color: #fff;\n        border: 1px solid #d8d8d8;\n    }\n    library-search-db .check_cont:hover input ~ .checkmark_styled {\n        background-color: #002655;\n    }\n    library-search-db .check_cont input:checked ~ .checkmark_styled {\n        background-color: #002655;\n    }\n    library-search-db .checkmark_styled:after {\n        content: "";\n        position: absolute;\n        display: none;\n    }\n    library-search-db .check_cont input:checked ~ .checkmark_styled:after {\n        display: block;\n    }\n    library-search-db .check_cont .checkmark_styled:after {\n        left: 7px;\n        top: 2px;\n        width: 7px;\n        height: 12px;\n        border: solid white;\n        border-width: 0 2px 2px 0;\n        -webkit-transform: rotate(45deg);\n        -ms-transform: rotate(45deg);\n        transform: rotate(45deg);\n    }\n    library-search-db .arrowdown {\n        margin-right: 12px;\n        width: 0px;\n        height: 0px;\n        border-left: 6px solid transparent;\n        border-right: 6px solid transparent;\n        border-top: 8px solid #002655;\n        display: inline-block;\n        pointer-events: none;\n        position: absolute;\n        right: 0px;\n        bottom: 22px;\n    }\n    @media(max-width: 570px){\n        library-search-db .dbsearch-drop {\n            width: 100%;\n            margin-right: 0px;\n        }\n        library-search-db #db_search_input input {\n            min-width: 100px;\n        }\n        library-search-db iron-dropdown {\n            width: 100%;\n        }\n    }\n</style>\n';var i=e=>(class extends e{_attachDom(e){if(window.ShadyDOM&&window.ShadyDOM.inUse)return super._attachDom(e);let n=e.querySelectorAll("style");for(var t=0;t<n.length;t++)n[t].parentNode.removeChild(n[t]),this._stylesInserted||(n[t].setAttribute("id",this.nodeName.toLowerCase()+"-styles"),document.head.appendChild(n[t]));return this.appendChild(e),e}querySelector(e){return this.shadowRoot?this.shadowRoot.querySelector(e):super.querySelector(e)}querySelectorAll(e){return this.shadowRoot?this.shadowRoot.querySelectorAll(e):super.querySelectorAll(e)}});class o extends(Mixin(r.a).with(i)){static get template(){return Object(r.b)([a+s])}static get is(){return"library-search-db"}static get properties(){return{subjects:{type:Array,value:[]},materials:{type:Array,value:[]},verbose:{type:Boolean},library_url:{type:String,value:"https://www.library.ucdavis.edu"},api_base_url:{type:String,value:"/wp-json"},api_materials_url:{type:String,value:"/wp/v2/material"},api_subjects_url:{type:String,value:"/wp/v2/ucd-subject"},vpn_url:{type:String,computed:"_vpn_url(library_url)"},url_args:{type:Object,computed:"getUrlVars()"},query:{type:Object},a11y_target:{type:Object}}}static get observers(){return["_query_change(query.*)"]}constructor(){super()}ready(){super.ready(),this.verbose&&console.log("Advanced database search widget loaded."),this.a11y_target=this.$.db_search_input;var e=this;this.reset_query(),this.fetch_filters();var n={};for(const[a,s]of Object.entries(this.url_args))Object.keys(this.query).includes(a)&&(n[a]=s);if(Object.keys(n).length>0)for(var[t,r]of Object.entries(n))"everyone"!=t&&"vpn"!=t||(r=!1),"s"==t&&(this.$.db_search_input.bindValue=r),this.set("query."+t,r);this.verbose&&(console.log("URL Args: ",this.url_args),console.log("Recognized URL args",n)),this.$.db_search_input.addEventListener("iron-input-validate",function(){e.set("query.s",e.$.db_search_input.bindValue)})}reset_query(){this.set("query",{s:"",dbmaterial:"any",dbsubject:"any",everyone:!0,vpn:!0}),this.$.materials_button.textContent="Any Material",this.$.subjects_button.textContent="Any Subject"}submit_query(){var e=!1;if(""==this.query.s)var n=this.library_url+"/database/?";else{n=this.library_url+"/?post_type=database";n+="&s="+encodeURIComponent(this.query.s),e=!0}"any"!=this.query.dbmaterial&&(e&&(n+="&"),e=!0,n+="dbmaterial="+encodeURIComponent(this.query.dbmaterial)),"any"!=this.query.dbsubject&&(e&&(n+="&"),e=!0,n+="dbsubject="+encodeURIComponent(this.query.dbsubject)),0==this.query.everyone&&(e&&(n+="&"),e=!0,n+="everyone=false"),0==this.query.vpn&&(e&&(n+="&"),e=!0,n+="vpn=false"),this.verbose&&console.log(n),window.location=n}fetch_filters(){this.$.ajax_materials.url=this.library_url+this.api_base_url+this.api_materials_url+"?per_page=100",this.$.ajax_subjects.url=this.library_url+this.api_base_url+this.api_subjects_url+"?per_page=100",this.verbose&&(console.log("Fetching materials list from",this.$.ajax_materials.url),console.log("Fetching subjects list from",this.$.ajax_subjects.url),this.$.ajax_materials.verbose=!0,this.$.ajax_subjects.verbose=!0);let e=this.$.ajax_materials.generateRequest(),n=this.$.ajax_subjects.generateRequest();var t=this;this.materials=[{name:"Any Material",slug:"any",id:0}],e.completes.then(function(e){var n=e.response;for(var r of n)r.count<=0||(r.slug==t.query.dbmaterial&&(t.$.materials_button.textContent=r.name),t.push("materials",r));t.verbose&&console.log("Materials List: ",t.materials)},function(e){}),this.subjects=[{name:"Any Subject",slug:"any",id:0}],n.completes.then(function(e){var n=e.response;for(var r of n)r.count<=0||0==r.parent||(r.slug==t.query.dbsubject&&(t.$.subjects_button.textContent=r.name),t.push("subjects",r));t.verbose&&console.log("Subjects List: ",t.subjects)},function(e){})}getUrlVars(){var e={};decodeURIComponent(window.location.href).replace(/[?&]+([^=&]+)=([^&]*)/gi,function(n,t,r){e[t]=r});return e}_vpn_url(e){return e+"/service/connect-from-off-campus"}_toggle_checkbox(e){var n=e.target.getAttribute("id");let t="query."+n.split("_")[1];this.set(t,this.$[n].checked)}_query_change(){this.verbose&&console.log("Query changed: ",this.query)}_open_dropdown(e){var n=e.target.getAttribute("drop_type");"materials"==n?this.$.drop_materials.open():"subjects"==n&&this.$.drop_subjects.open()}_select_dropdown(e){var n=e.target.getAttribute("drop_type"),t=e.target.getAttribute("slug"),r=e.target.textContent;"materials"==n?(this.$.materials_button.textContent=r,this.$.drop_materials.close(),this.set("query.dbmaterial",t)):"subjects"==n&&(this.$.subjects_button.textContent=r,this.$.drop_subjects.close(),this.set("query.dbsubject",t))}}customElements.define(o.is,o)}]]);